<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ä¸šé—äº§æ”¹é€ ç»¼åˆä½“éªŒ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a3a, #0d1b2a);
            color: #e0e0e0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
        }
        
        header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
            max-width: 800px;
        }
        
        h1 {
            color: #4db8ff;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 10px rgba(77, 184, 255, 0.5);
        }
        
        .subtitle {
            color: #a0d2ff;
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
        
        .game-container {
            position: relative;
            margin-bottom: 20px;
            border: 3px solid #2a3a4a;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        canvas {
            display: block;
            background-color: #15202b;
        }
        
        .ui-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            max-width: 800px;
            width: 100%;
        }
        
        .controls {
            flex: 1;
            min-width: 300px;
            background: rgba(30, 40, 50, 0.8);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #3a4a5a;
        }
        
        .controls h2 {
            color: #4db8ff;
            margin-bottom: 15px;
            border-bottom: 1px solid #3a4a5a;
            padding-bottom: 8px;
        }
        
        .key {
            display: inline-block;
            background: #2a3a4a;
            padding: 5px 10px;
            border-radius: 4px;
            margin: 0 5px;
            font-weight: bold;
            box-shadow: 0 2px 0 #1a2a3a;
            color: #a0d2ff;
        }
        
        .location-info {
            flex: 1;
            min-width: 300px;
            background: rgba(30, 40, 50, 0.8);
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #3a4a5a;
        }
        
        .location-info h2 {
            color: #4db8ff;
            margin-bottom: 15px;
            border-bottom: 1px solid #3a4a5a;
            padding-bottom: 8px;
        }
        
        .comparison-modal {
            display: none;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(20, 30, 40, 0.95);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.7);
            z-index: 10;
            width: 90%;
            max-width: 700px;
            border: 2px solid #4db8ff;
        }
        
        .comparison-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .comparison-header {
            text-align: center;
            color: #4db8ff;
            margin-bottom: 10px;
        }
        
        .comparison-row {
            display: flex;
            gap: 20px;
        }
        
        .comparison-item {
            flex: 1;
            text-align: center;
        }
        
        .comparison-item h3 {
            margin: 10px 0 5px;
            color: #4db8ff;
        }
        
        .comparison-image {
            width: 100%;
            height: 180px;
            background-color: #2a3a4a;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #3a4a5a;
            overflow: hidden;
        }
        
        .comparison-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-btn:hover {
            color: #4db8ff;
        }
        
        .progress-container {
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 20px;
            background: #2a3a4a;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 10px;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #4db8ff, #2a8fcc);
            width: 0%;
            transition: width 0.5s;
            border-radius: 10px;
        }
        
        .instructions {
            text-align: center;
            margin-top: 20px;
            font-size: 14px;
            color: #a0a0a0;
            max-width: 800px;
        }
        
        .location-list {
            list-style-type: none;
        }
        
        .location-list li {
            padding: 8px 0;
            border-bottom: 1px solid #3a4a5a;
            display: flex;
            align-items: center;
        }
        
        .location-list li:last-child {
            border-bottom: none;
        }
        
        .location-icon {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 10px;
        }
        
        .discovered {
            color: #4db8ff;
        }
        
        /* è®°å¿†æ¸¸æˆæ ·å¼ */
        #memory-game-container {
            display: none;
            max-width: 800px;
            width: 100%;
        }
        
        .intro {
            max-width: 800px;
            margin: 0 auto 30px;
            background-color: #34495e;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        
        .intro p {
            margin-bottom: 15px;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 12px 24px;
            background-color: #e67e22;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        
        button:hover {
            background-color: #d35400;
            transform: translateY(-2px);
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            background-color: #34495e;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #f1c40f;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .game-board {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .game-board {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .card {
            height: 180px;
            perspective: 1000px;
            cursor: pointer;
        }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }
        
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }
        
        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .card-front {
            background: linear-gradient(135deg, #7f8c8d, #95a5a6);
            color: #2c3e50;
            font-weight: bold;
        }
        
        .card-front::before {
            content: "?";
            font-size: 3rem;
            color: rgba(44, 62, 80, 0.3);
        }
        
        .card-back {
            background-color: #ecf0f1;
            color: #2c3e50;
            transform: rotateY(180deg);
            overflow: hidden;
            padding: 0;
        }
        
        .card-back img {
            width: 100%;
            height: 70%;
            object-fit: cover;
            border-radius: 5px 5px 0 0;
            margin-bottom: 0;
        }
        
        .card-back .card-title {
            font-size: 0.9rem;
            font-weight: bold;
            margin: 5px 0;
            padding: 0 5px;
        }
        
        .card-back .card-desc {
            font-size: 0.7rem;
            color: #7f8c8d;
            padding: 0 5px 5px;
        }
        
        .matched .card-back {
            background-color: #2ecc71;
            color: white;
        }
        
        .info-panel {
            background-color: #34495e;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
        }
        
        .info-title {
            color: #f1c40f;
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.5rem;
        }
        
        .info-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .info-item {
            background-color: #2c3e50;
            padding: 15px;
            border-radius: 5px;
        }
        
        .info-item h3 {
            color: #e67e22;
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px;
            color: #bdc3c7;
            font-size: 0.9rem;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: #34495e;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .modal h2 {
            color: #f1c40f;
            margin-bottom: 20px;
        }
        
        .modal p {
            margin-bottom: 20px;
        }
        
        .celebration {
            font-size: 3rem;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        .level-complete-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .level-complete-content {
            background-color: #34495e;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        @media (max-width: 850px) {
            .ui-container {
                flex-direction: column;
            }
            
            .comparison-row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>å›½è¥751å‚çš„æ”¹é€ </h1>
        <p class="subtitle">æ¢ç´¢å·¥ä¸šé—äº§çš„ä¿æŠ¤ä¸åˆ›æ–°èåˆ</p>
    </header>
    
    <div class="progress-container">
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        <div style="text-align: center;">æ¢ç´¢è¿›åº¦: <span id="progressText">0%</span></div>
    </div>
    
    <!-- ç¬¬ä¸€å…³ï¼šå›­åŒºæ¢ç´¢æ¸¸æˆ -->
    <div id="exploration-game-container">
        <div class="game-container">
            <canvas id="gameCanvas" width="800" height="500"></canvas>
            <div class="comparison-modal" id="comparisonModal">
                <button class="close-btn" id="closeModal">&times;</button>
                <div class="comparison-content" id="comparisonContent">
                    <!-- å†…å®¹ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
        
        <div class="ui-container">
            <div class="controls">
                <h2>æ§åˆ¶è¯´æ˜</h2>
                <p>ä½¿ç”¨ <span class="key">W</span> <span class="key">A</span> <span class="key">S</span> <span class="key">D</span> æˆ–æ–¹å‘é”®ç§»åŠ¨è§’è‰²</p>
                <p>èµ°åˆ°æ ‡è®°ä½ç½®åæŒ‰ <span class="key">ç©ºæ ¼é”®</span> æŸ¥çœ‹æ”¹é€ å‰åå¯¹æ¯”</p>
                <p>æŒ‰ <span class="key">E</span> é”®ä¸å›­åŒºå†…çš„äº’åŠ¨ç‚¹äº¤äº’</p>
                <p>æŒ‰ <span class="key">ESC</span> é”®å…³é—­å¯¹è¯æ¡†</p>
            </div>
            
            <div class="location-info">
                <h2>å›­åŒºåœ°ç‚¹</h2>
                <ul class="location-list" id="locationList">
                    <!-- åœ°ç‚¹åˆ—è¡¨ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </ul>
            </div>
        </div>
        
        <div class="instructions">
            <p>æ¢ç´¢å›­åŒºä¸­çš„æ‰€æœ‰åœ°ç‚¹ï¼Œäº†è§£å·¥ä¸šé—äº§å¦‚ä½•é€šè¿‡æ”¹é€ è·å¾—æ–°ç”Ÿï¼</p>
        </div>
    </div>
    
    <!-- ç¬¬äºŒå…³ï¼šè®°å¿†é…å¯¹æ¸¸æˆ -->
    <div id="memory-game-container">
        <section class="intro">
            <p>æ­å–œä½ å®Œæˆäº†å›­åŒºæ¢ç´¢ï¼ç°åœ¨è¿›å…¥ç¬¬äºŒå…³ï¼šå·¥ä¸šé—äº§æ”¹é€ å‰åé…å¯¹æ¸¸æˆã€‚</p>
            <p>åœ¨è¿™ä¸ªæ¸¸æˆä¸­ï¼Œä½ éœ€è¦å°†æ¯ä¸ªå·¥ä¸šé—äº§çš„æ”¹é€ å‰å’Œæ”¹é€ åå›¾ç‰‡é…å¯¹èµ·æ¥ã€‚</p>
            <p>ä½¿ç”¨ä½ åœ¨ç¬¬ä¸€å…³å­¦åˆ°çš„çŸ¥è¯†ï¼Œæ‰¾å‡ºå“ªäº›å›¾ç‰‡å±äºåŒä¸€ä¸ªå·¥ä¸šé—äº§çš„æ”¹é€ å‰åå¯¹æ¯”ã€‚</p>
        </section>

        <div class="game-controls">
            <button id="start-btn">å¼€å§‹æ¸¸æˆ</button>
            <button id="reset-btn">é‡æ–°å¼€å§‹</button>
            <button id="hint-btn">æç¤º</button>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">å°è¯•æ¬¡æ•°</div>
                <div class="stat-value" id="attempts">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">åŒ¹é…å¯¹æ•°</div>
                <div class="stat-value" id="matches">0/6</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">æ—¶é—´</div>
                <div class="stat-value" id="timer">00:00</div>
            </div>
        </div>

        <div class="game-board" id="game-board">
            <!-- å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
        </div>

        <section class="info-panel">
            <h2 class="info-title">å·¥ä¸šé—äº§ä¿æŠ¤çš„é‡è¦æ€§</h2>
            <div class="info-content">
                <div class="info-item">
                    <h3>å†å²ä»·å€¼</h3>
                    <p>å·¥ä¸šé—äº§è®°å½•äº†å·¥ä¸šé©å‘½ä»¥æ¥çš„æŠ€æœ¯è¿›æ­¥å’Œç¤¾ä¼šå‘å±•ï¼Œæ˜¯ç ”ç©¶å·¥ä¸šå†å²çš„é‡è¦å®ç‰©èµ„æ–™ã€‚</p>
                </div>
                <div class="info-item">
                    <h3>æ–‡åŒ–ä»·å€¼</h3>
                    <p>å·¥ä¸šå»ºç­‘å’Œè®¾æ–½ä½“ç°äº†ç‰¹å®šæ—¶æœŸçš„å»ºç­‘é£æ ¼å’Œå·¥ç¨‹æŠ€æœ¯ï¼Œå…·æœ‰ç‹¬ç‰¹çš„æ–‡åŒ–ä»·å€¼ã€‚</p>
                </div>
                <div class="info-item">
                    <h3>ç»æµä»·å€¼</h3>
                    <p>é€šè¿‡æ”¹é€ å†åˆ©ç”¨ï¼Œå·¥ä¸šé—äº§å¯ä»¥æˆä¸ºåˆ›æ„äº§ä¸šã€æ—…æ¸¸ä¸šå’Œæ–‡åŒ–æ´»åŠ¨çš„é‡è¦è½½ä½“ã€‚</p>
                </div>
                <div class="info-item">
                    <h3>ç¯å¢ƒä»·å€¼</h3>
                    <p>æ”¹é€ åˆ©ç”¨ç°æœ‰å·¥ä¸šå»ºç­‘æ¯”æ‹†é™¤é‡å»ºæ›´ç¯ä¿ï¼Œç¬¦åˆå¯æŒç»­å‘å±•ç†å¿µã€‚</p>
                </div>
            </div>
        </section>
    </div>

    <!-- å…³å¡å®Œæˆæ¨¡æ€æ¡† -->
    <div class="level-complete-modal" id="level-complete-modal">
        <div class="level-complete-content">
            <div class="celebration">ğŸ‰</div>
            <h2>æ­å–œå®Œæˆç¬¬ä¸€å…³ï¼</h2>
            <p>ä½ æˆåŠŸæ¢ç´¢äº†å·¥ä¸šé—äº§æ”¹é€ å›­åŒºçš„æ‰€æœ‰åœ°ç‚¹ï¼Œäº†è§£äº†å·¥ä¸šé—äº§çš„æ”¹é€ è¿‡ç¨‹ã€‚</p>
            <p>ç°åœ¨å¯ä»¥è¿›å…¥ç¬¬äºŒå…³ï¼šå·¥ä¸šé—äº§æ”¹é€ å‰åé…å¯¹æ¸¸æˆã€‚</p>
            <button id="next-level">è¿›å…¥ç¬¬äºŒå…³</button>
        </div>
    </div>

    <!-- æ¸¸æˆå®Œæˆæ¨¡æ€æ¡† -->
    <div class="modal" id="win-modal">
        <div class="modal-content">
            <div class="celebration">ğŸ‰</div>
            <h2>æ­å–œä½ å®Œæˆäº†æ¸¸æˆï¼</h2>
            <p>ä½ æˆåŠŸé…å¯¹äº†æ‰€æœ‰å·¥ä¸šé—äº§çš„æ”¹é€ å‰åå›¾ç‰‡ï¼Œäº†è§£äº†å®ƒä»¬ä»å·¥ä¸šè®¾æ–½åˆ°æ–‡åŒ–ç©ºé—´çš„è½¬å˜ã€‚</p>
            <p>å°è¯•æ¬¡æ•°: <span id="final-attempts">0</span></p>
            <p>ç”¨æ—¶: <span id="final-time">00:00</span></p>
            <button id="play-again">å†ç©ä¸€æ¬¡</button>
        </div>
    </div>

    <footer>
        <p>å·¥ä¸šé—äº§æ”¹é€ ç»¼åˆä½“éªŒ &copy; 2023 | äº†è§£å†å²ï¼Œåˆ›é€ æœªæ¥</p>
    </footer>

    <script>
        // ===============================
        // ç¬¬ä¸€å…³ï¼šå›­åŒºæ¢ç´¢æ¸¸æˆ
        // ===============================
        // å›­åŒºåœ°ç‚¹æ•°æ® - æ·»åŠ å›¾ç‰‡URLå±æ€§
        const locationsData = [
            {
                id: 1,
                x: 150,
                y: 100,
                name: "å‚æˆ¿",
                color: "#e74c3c",
                before: {
                    title: "æ”¹é€ å‰",
                    description: "æ”¹é€ å‰çš„798å‚æˆ¿æ˜¯å…¸å‹çš„åŒ…è±ªæ–¯é£æ ¼å»ºç­‘ï¼Œé”¯é½¿å½¢å±‹é¡¶ï¼Œé«˜å¤§å®½æ•ï¼Œå¢™é¢æ–‘é©³ï¼Œæœ‰æ˜æ˜¾çš„å·¥ä¸šæ—¶ä»£ç—•è¿¹ã€‚",
                    image: "å‚æˆ¿æ”¹é€ å‰.jpg"
                },
                after: {
                    title: "æ”¹é€ å",
                    description: "å‚æˆ¿è¢«æ”¹é€ æˆäº†å½“ä»£è‰ºæœ¯ç©ºé—´ã€ç”»å»Šã€å·¥ä½œå®¤ç­‰ï¼Œå¤–å¢™ç»è¿‡ä¿®ç¼®å’Œè£…é¥°ï¼Œå¢åŠ äº†è®¸å¤šè‰ºæœ¯å…ƒç´ å’Œç°ä»£è®¾æ–½ã€‚",
                    image: "images/å‚æˆ¿æ”¹é€ å.jpg"
                }
            },
            {
                id: 2,
                x: 600,
                y: 150,
                name: "å‚¨å­˜ä»“åº“",
                color: "#9b59b6",
                before: {
                    title: "æ”¹é€ å‰",
                    description: "å¤§å‹å‚¨æ–™ä»“åº“ï¼Œç©ºé—´å°é—­ï¼ŒåŠŸèƒ½å•ä¸€ï¼Œä»…ç”¨äºå­˜æ”¾åŸææ–™ã€‚",
                    image: "image/å‚¨æ–™ä»“åº“æ”¹é€ å‰.jpg"
                },
                after: {
                    title: "æ”¹é€ å",
                    description: "å¤šåŠŸèƒ½å±•è§ˆä¸­å¿ƒï¼Œå¯ç”¨äºè‰ºæœ¯å±•è§ˆå’Œç¤¾åŒºæ´»åŠ¨ï¼Œä¿ç•™äº†åŸæœ‰çš„é’¢ç»“æ„ã€‚",
                    image: "image/å‚¨æ–™ä»“åº“æ”¹é€ å.jpg"
                }
            },
            {
                id: 3,
                x: 300,
                y: 400,
                name: "æ—§ç«è½¦ç«™",
                color: "#e67e22",
                before: {
                    title: "æ”¹é€ å‰",
                    description: "ç«è½¦ç«™æ”¹é€ å‰æ˜¯751å‚ç‡ƒç…¤é”…ç‚‰å‚¨ç…¤æ± ï¼Œä¸¤ä¾§æ˜¯ç…¤ç‚­ã€é‡æ²¹ç­‰ç‰©èµ„è¿è¾“ä¸“ç”¨çº¿",
                    image: "images/æ—§ç«è½¦ç«™æ”¹é€ å‰.png"
                },
                after: {
                    title: "æ”¹é€ å",
                    description: "æ”¹é€ åï¼Œé“è½¨å’Œç«è½¦è½¦å¢è¢«ä¿ç•™ä¸‹æ¥ï¼Œè€å¼ç«è½¦è½¦å¢ç„•æ–°ä¸ºé“¶è‰²ï¼Œè¿˜æ­å»ºäº†é•‚ç©ºçš„é®é˜³æ„ç­‘ç‰©ï¼Œå¢åŠ äº†ç»¿æ¤ç›†æ™¯ã€ä¼‘æ†©ç©ºé—´ç­‰",
                    image: "images/æ—§ç«è½¦ç«™æ”¹é€ å.png"
                }
            },
            {
                id: 4,
                x: 650,
                y: 350,
                name: "è“„æ°´æ± ",
                color: "#2ecc71",
                before: {
                    title: "æ”¹é€ å‰",
                    description: "è“„æ°´æ± æ”¹é€ å‰æ˜¯ä¸èµ·çœ¼çš„å·¥ä¸šè“„æ°´æ± ï¼Œç¯å¢ƒç®€é™‹",
                    image: "images/è“„æ°´æ± æ”¹é€ å‰.jpg"
                },
                after: {
                    title: "æ”¹é€ å",
                    description: "åœ¨ä¿æŒåŸæ¥é£è²Œçš„æƒ…å†µä¸‹ï¼ŒåŠ ä»¥æ”¹å»ºï¼Œå¢åŠ äº†æœ¨è´¨é•¿æ¤…ã€å¹³å°ç­‰ï¼Œå˜æˆäº†ç²¾è‡´çš„æ°´ç«™å…¬å›­",
                    image: "images/è“„æ°´æ± æ”¹é€ å.jpg"
                }
            },
            {
                id: 5,
                x: 200,
                y: 300,
                name: "èƒ½æºåŠ¨åŠ›å‚",
                color: "#1abc9c",
                before: {
                    title: "æ”¹é€ å‰",
                    description: "å·¥ä¸šæ°´å¤„ç†è®¾æ–½ï¼ŒåŠŸèƒ½å•ä¸€ï¼Œå­˜åœ¨æ±¡æŸ“é£é™©ï¼Œç©ºé—´åˆ©ç”¨ç‡ä½ã€‚",
                    image: "images/èƒ½æºåŠ¨åŠ›å‚æ”¹é€ å‰.jpg"
                },
                after: {
                    title: "æ”¹é€ å",
                    description: "æ‹†é™¤äº†éƒ¨åˆ†è€æ—§è®¾å¤‡ï¼Œå¢åŠ äº†ç»¿åœ°ã€å¹¿åœºç­‰å…¬å…±ç©ºé—´ï¼ŒçƒŸå›±ç­‰å·¥ä¸šè®¾æ–½è¢«ä¿ç•™ä¸‹æ¥",
                    image: "images/èƒ½æºåŠ¨åŠ›å‚æ”¹é€ å.jpg"
                }
            },
            {
                id: 6,
                x: 500,
                y: 200,
                name: "é“è½¨ç«™å°",
                color: "#f39c12",
                before: {
                    title: "æ”¹é€ å‰",
                    description: "çº¢ç –ç Œæˆçš„ç®€æ˜“ç«™å°å»ºç­‘ï¼Œå¢™é¢æ–‘é©³ã€è®¾æ–½ç®€é™‹ï¼Œä»…é…å¤‡åŸºç¡€çš„æ¢¯å­ä¸ç‹­é•¿çš„ç«™å°æªå»Šï¼›é“è½¨æ—æ˜¯ç¢çŸ³é“åºŠï¼Œå‘¨è¾¹æ— è£…é¥°ä¸ç»¿åŒ–",
                    image: "images/ç«è½¦ç«™å°æ”¹é€ å‰.jpg"
                },
                after: {
                    title: "æ”¹é€ å",
                    description: "ä¿ç•™çº¢ç –å»ºç­‘çš„å·¥ä¸šè‚Œç†ï¼Œå¢™é¢åšäº†ç¿»æ–°ä¿®å¤ï¼Œæ­é…æš–é»„è‰²ç¯å…‰ç¯å¸¦ï¼›ç«™å°æªå»Šå¢è®¾æœ¨è´¨ä¼‘é—²åº§æ¤…ã€è‰ºæœ¯è£…ç½®ï¼ˆå¦‚å¤å¤ä¿¡å·ç¯è£…é¥°ï¼‰ï¼›é“è½¨æ—çš„ç¢çŸ³é“åºŠæ•´ç†å¾—æ›´æ•´æ´ï¼Œç‚¹ç¼€äº†ç»¿æ¤èŠ±ç®±ä¸å·¥ä¸šé£æ ‡è¯†ç‰Œ",
                    image: "images/ç«è½¦ç«™å°æ”¹é€ å.jpg"
                }
            }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            const canvas = document.getElementById('gameCanvas');
            const ctx = canvas.getContext('2d');
            const comparisonModal = document.getElementById('comparisonModal');
            const comparisonContent = document.getElementById('comparisonContent');
            const closeModal = document.getElementById('closeModal');
            const progressBar = document.getElementById('progress');
            const progressText = document.getElementById('progressText');
            const locationList = document.getElementById('locationList');
            const explorationGameContainer = document.getElementById('exploration-game-container');
            const memoryGameContainer = document.getElementById('memory-game-container');
            const levelCompleteModal = document.getElementById('level-complete-modal');
            const nextLevelBtn = document.getElementById('next-level');
            
            // æ¸¸æˆçŠ¶æ€
            const gameState = {
                player: {
                    x: 400,
                    y: 250,
                    width: 16,
                    height: 24,
                    speed: 3,
                    color: '#4db8ff',
                    direction: 'down'
                },
                keys: {},
                locations: [],
                discovered: 0,
                totalLocations: 6,
                tiles: [],
                tileSize: 32,
                camera: {
                    x: 0,
                    y: 0
                }
            };
            
            // åˆå§‹åŒ–å›­åŒºåœ°ç‚¹
            function initLocations() {
                gameState.locations = locationsData.map(loc => ({
                    ...loc,
                    radius: 40,
                    discovered: false
                }));
                
                // åˆå§‹åŒ–åœ°ç‚¹åˆ—è¡¨
                updateLocationList();
            }
            
            // æ›´æ–°åœ°ç‚¹åˆ—è¡¨
            function updateLocationList() {
                locationList.innerHTML = '';
                gameState.locations.forEach(location => {
                    const li = document.createElement('li');
                    li.className = location.discovered ? 'discovered' : '';
                    li.innerHTML = `
                        <span class="location-icon" style="background-color: ${location.color}"></span>
                        ${location.name}
                        ${location.discovered ? '<span style="margin-left: auto;">âœ“</span>' : ''}
                    `;
                    locationList.appendChild(li);
                });
            }
            
            // ç”Ÿæˆåœ°å›¾ç“¦ç‰‡
            function generateTiles() {
                const rows = Math.ceil(canvas.height / gameState.tileSize);
                const cols = Math.ceil(canvas.width / gameState.tileSize);
                
                for (let y = 0; y < rows; y++) {
                    gameState.tiles[y] = [];
                    for (let x = 0; x < cols; x++) {
                        // åˆ›å»ºåŸºç¡€åœ°é¢
                        let type = 'grass';
                        let variant = Math.floor(Math.random() * 3);
                        
                        // æ·»åŠ è·¯å¾„
                        if (
                            (x > 2 && x < cols - 3 && y === Math.floor(rows/2)) ||
                            (y > 2 && y < rows - 3 && x === Math.floor(cols/2)) ||
                            (x > 5 && x < 10 && y > 5 && y < 10) ||
                            (x > cols - 10 && x < cols - 5 && y > 5 && y < 10) ||
                            (x > 5 && x < 10 && y > rows - 10 && y < rows - 5) ||
                            (x > cols - 10 && x < cols - 5 && y > rows - 10 && y < rows - 5)
                        ) {
                            type = 'path';
                            variant = Math.floor(Math.random() * 2);
                        }
                        
                        // æ·»åŠ æ°´åŸŸ
                        if (
                            (x > 12 && x < 18 && y > 12 && y < 18)
                        ) {
                            type = 'water';
                            variant = Math.floor(Math.random() * 2);
                        }
                        
                        gameState.tiles[y][x] = { type, variant };
                    }
                }
            }
            
            // ç»˜åˆ¶æ¸¸æˆåœºæ™¯
            function draw() {
                // æ¸…ç©ºç”»å¸ƒ
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ç»˜åˆ¶èƒŒæ™¯
                drawBackground();
                
                // ç»˜åˆ¶åœ°å›¾ç“¦ç‰‡
                drawTiles();
                
                // ç»˜åˆ¶åœ°ç‚¹
                drawLocations();
                
                // ç»˜åˆ¶ç©å®¶
                drawPlayer();
                
                // ç»˜åˆ¶UI
                drawUI();
            }
            
            // ç»˜åˆ¶èƒŒæ™¯
            function drawBackground() {
                // ç»˜åˆ¶æ¸å˜èƒŒæ™¯
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#0d1b2a');
                gradient.addColorStop(1, '#1a2a3a');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // ç»˜åˆ¶æ˜Ÿæ˜Ÿ
                ctx.fillStyle = '#ffffff';
                for (let i = 0; i < 50; i++) {
                    const x = Math.random() * canvas.width;
                    const y = Math.random() * canvas.height / 2;
                    const size = Math.random() * 2;
                    ctx.fillRect(x, y, size, size);
                }
            }
            
            // ç»˜åˆ¶åœ°å›¾ç“¦ç‰‡
            function drawTiles() {
                const tileSize = gameState.tileSize;
                
                for (let y = 0; y < gameState.tiles.length; y++) {
                    for (let x = 0; x < gameState.tiles[y].length; x++) {
                        const tile = gameState.tiles[y][x];
                        const tileX = x * tileSize;
                        const tileY = y * tileSize;
                        
                        switch (tile.type) {
                            case 'grass':
                                ctx.fillStyle = tile.variant === 0 ? '#2d5a27' : 
                                              tile.variant === 1 ? '#355e30' : '#3c6a38';
                                break;
                            case 'path':
                                ctx.fillStyle = tile.variant === 0 ? '#8b7355' : '#a08669';
                                break;
                            case 'water':
                                ctx.fillStyle = tile.variant === 0 ? '#2a8fcc' : '#2a7cb3';
                                break;
                        }
                        
                        ctx.fillRect(tileX, tileY, tileSize, tileSize);
                        
                        // æ·»åŠ çº¹ç†ç»†èŠ‚
                        if (tile.type === 'grass') {
                            ctx.fillStyle = '#3c6a38';
                            ctx.fillRect(tileX + 4, tileY + 4, 2, 2);
                            ctx.fillRect(tileX + tileSize - 6, tileY + 10, 2, 2);
                            ctx.fillRect(tileX + 10, tileY + tileSize - 6, 2, 2);
                        } else if (tile.type === 'path') {
                            ctx.fillStyle = '#a08669';
                            ctx.fillRect(tileX + 8, tileY + 8, 4, 4);
                            ctx.fillRect(tileX + tileSize - 12, tileY + 12, 4, 4);
                        }
                    }
                }
            }
            
            // ç»˜åˆ¶åœ°ç‚¹
            function drawLocations() {
                gameState.locations.forEach(location => {
                    // ç»˜åˆ¶åœ°ç‚¹æ ‡å¿—
                    ctx.beginPath();
                    ctx.arc(location.x, location.y, location.radius, 0, Math.PI * 2);
                    
                    if (location.discovered) {
                        ctx.fillStyle = location.color;
                    } else {
                        ctx.fillStyle = '#7f8c8d';
                    }
                    
                    ctx.fill();
                    ctx.strokeStyle = '#ecf0f1';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                    
                    // ç»˜åˆ¶åœ°ç‚¹å›¾æ ‡
                    ctx.fillStyle = '#ffffff';
                    ctx.font = 'bold 20px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    
                    if (!location.discovered) {
                        ctx.fillText('?', location.x, location.y);
                    } else {
                        // æ ¹æ®åœ°ç‚¹ç±»å‹ç»˜åˆ¶ä¸åŒå›¾æ ‡
                        switch(location.id) {
                            case 1: // é”…ç‚‰æˆ¿
                                drawBuildingIcon(location.x, location.y, location.color);
                                break;
                            case 2: // ä»“åº“
                                drawWarehouseIcon(location.x, location.y, location.color);
                                break;
                            case 3: // çƒŸå›±
                                drawChimneyIcon(location.x, location.y, location.color);
                                break;
                            case 4: // è½¦é—´
                                drawWorkshopIcon(location.x, location.y, location.color);
                                break;
                            case 5: // æ°´å¤„ç†
                                drawWaterIcon(location.x, location.y, location.color);
                                break;
                            case 6: // è½¨é“
                                drawRailIcon(location.x, location.y, location.color);
                                break;
                        }
                    }
                    
                    // ç»˜åˆ¶åœ°ç‚¹åç§°
                    ctx.fillStyle = '#ecf0f1';
                    ctx.font = '12px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(location.name, location.x, location.y + location.radius + 15);
                });
            }
            
            // ç»˜åˆ¶å»ºç­‘å›¾æ ‡
            function drawBuildingIcon(x, y, color) {
                ctx.fillStyle = color;
                ctx.fillRect(x - 12, y - 8, 24, 16);
                ctx.fillStyle = '#2c3e50';
                ctx.fillRect(x - 8, y - 4, 16, 8);
                ctx.fillRect(x - 2, y - 12, 4, 4);
            }
            
            // ç»˜åˆ¶ä»“åº“å›¾æ ‡
            function drawWarehouseIcon(x, y, color) {
                ctx.fillStyle = color;
                ctx.fillRect(x - 15, y - 6, 30, 12);
                ctx.fillStyle = '#2c3e50';
                ctx.fillRect(x - 12, y - 3, 24, 6);
            }
            
            // ç»˜åˆ¶çƒŸå›±å›¾æ ‡
            function drawChimneyIcon(x, y, color) {
                ctx.fillStyle = color;
                ctx.fillRect(x - 4, y - 15, 8, 30);
                ctx.fillRect(x - 10, y + 10, 20, 5);
            }
            
            // ç»˜åˆ¶è½¦é—´å›¾æ ‡
            function drawWorkshopIcon(x, y, color) {
                ctx.fillStyle = color;
                ctx.fillRect(x - 12, y - 6, 24, 12);
                ctx.fillStyle = '#2c3e50';
                ctx.fillRect(x - 8, y - 2, 16, 8);
            }
            
            // ç»˜åˆ¶æ°´å›¾æ ‡
            function drawWaterIcon(x, y, color) {
                ctx.fillStyle = color;
                ctx.beginPath();
                ctx.arc(x, y, 10, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = '#2c3e50';
                ctx.beginPath();
                ctx.arc(x, y, 6, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // ç»˜åˆ¶è½¨é“å›¾æ ‡
            function drawRailIcon(x, y, color) {
                ctx.fillStyle = color;
                ctx.fillRect(x - 15, y - 2, 30, 4);
                ctx.fillRect(x - 15, y + 2, 30, 2);
                
                ctx.fillStyle = '#2c3e50';
                for (let i = -12; i <= 12; i += 6) {
                    ctx.fillRect(x + i, y - 2, 2, 6);
                }
            }
            
            // ç»˜åˆ¶ç©å®¶
            function drawPlayer() {
                const player = gameState.player;
                
                // ç»˜åˆ¶ç©å®¶èº«ä½“
                ctx.fillStyle = player.color;
                ctx.fillRect(
                    player.x - player.width/2, 
                    player.y - player.height/2, 
                    player.width, 
                    player.height
                );
                
                // ç»˜åˆ¶ç©å®¶å¤´éƒ¨
                ctx.fillStyle = '#ecf0f1';
                ctx.fillRect(
                    player.x - player.width/2, 
                    player.y - player.height/2 - 4, 
                    player.width, 
                    6
                );
                
                // æ ¹æ®æ–¹å‘ç»˜åˆ¶ç©å®¶ç»†èŠ‚
                ctx.fillStyle = '#2c3e50';
                if (player.direction === 'left') {
                    ctx.fillRect(player.x - player.width/2, player.y - 2, 4, 4);
                } else if (player.direction === 'right') {
                    ctx.fillRect(player.x + player.width/2 - 4, player.y - 2, 4, 4);
                } else if (player.direction === 'up') {
                    ctx.fillRect(player.x - 2, player.y - player.height/2, 4, 4);
                } else {
                    ctx.fillRect(player.x - 2, player.y + player.height/2 - 4, 4, 4);
                }
            }
            
            // ç»˜åˆ¶UI
            function drawUI() {
                // ç»˜åˆ¶æç¤º
                ctx.fillStyle = '#ecf0f1';
                ctx.font = '14px Arial';
                ctx.textAlign = 'left';
                ctx.fillText(`å·²å‘ç°: ${gameState.discovered}/${gameState.totalLocations}`, 10, 20);
                
                // æ£€æŸ¥ç©å®¶æ˜¯å¦é è¿‘æŸä¸ªåœ°ç‚¹
                const nearLocation = checkNearLocation();
                if (nearLocation) {
                    ctx.fillStyle = '#f39c12';
                    ctx.font = '16px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`æŒ‰ç©ºæ ¼é”®æŸ¥çœ‹ ${nearLocation.name} çš„æ”¹é€ å‰åå¯¹æ¯”`, canvas.width/2, 30);
                }
            }
            
            // æ£€æŸ¥ç©å®¶æ˜¯å¦é è¿‘æŸä¸ªåœ°ç‚¹
            function checkNearLocation() {
                for (const location of gameState.locations) {
                    const distance = Math.sqrt(
                        Math.pow(gameState.player.x - location.x, 2) + 
                        Math.pow(gameState.player.y - location.y, 2)
                    );
                    
                    if (distance < location.radius + 30) {
                        return location;
                    }
                }
                return null;
            }
            
            // æ›´æ–°æ¸¸æˆçŠ¶æ€
            function update() {
                // ç§»åŠ¨ç©å®¶
                if (gameState.keys['ArrowUp'] || gameState.keys['w'] || gameState.keys['W']) {
                    gameState.player.y -= gameState.player.speed;
                    gameState.player.direction = 'up';
                }
                if (gameState.keys['ArrowDown'] || gameState.keys['s'] || gameState.keys['S']) {
                    gameState.player.y += gameState.player.speed;
                    gameState.player.direction = 'down';
                }
                if (gameState.keys['ArrowLeft'] || gameState.keys['a'] || gameState.keys['A']) {
                    gameState.player.x -= gameState.player.speed;
                    gameState.player.direction = 'left';
                }
                if (gameState.keys['ArrowRight'] || gameState.keys['d'] || gameState.keys['D']) {
                    gameState.player.x += gameState.player.speed;
                    gameState.player.direction = 'right';
                }
                
                // è¾¹ç•Œæ£€æŸ¥
                if (gameState.player.x < gameState.player.width/2) {
                    gameState.player.x = gameState.player.width/2;
                }
                if (gameState.player.x > canvas.width - gameState.player.width/2) {
                    gameState.player.x = canvas.width - gameState.player.width/2;
                }
                if (gameState.player.y < gameState.player.height/2) {
                    gameState.player.y = gameState.player.height/2;
                }
                if (gameState.player.y > canvas.height - gameState.player.height/2) {
                    gameState.player.y = canvas.height - gameState.player.height/2;
                }
                
                // æ›´æ–°è¿›åº¦æ¡
                const progress = (gameState.discovered / gameState.totalLocations) * 100;
                progressBar.style.width = `${progress}%`;
                progressText.textContent = `${Math.round(progress)}%`;
                
                // æ£€æŸ¥æ˜¯å¦å®Œæˆç¬¬ä¸€å…³
                if (gameState.discovered === gameState.totalLocations && !levelCompleteModal.style.display) {
                    setTimeout(() => {
                        levelCompleteModal.style.display = 'flex';
                    }, 1000);
                }
            }
            
            // æ˜¾ç¤ºåœ°ç‚¹å¯¹æ¯”
            function showLocationComparison(location) {
                comparisonContent.innerHTML = `
                    <h2 class="comparison-header">${location.name}</h2>
                    <div class="comparison-row">
                        <div class="comparison-item">
                            <h3>${location.before.title}</h3>
                            <div class="comparison-image">
                                <img src="${location.before.image}" alt="${location.before.title}">
                            </div>
                            <p>${location.before.description}</p>
                        </div>
                        <div class="comparison-item">
                            <h3>${location.after.title}</h3>
                            <div class="comparison-image">
                                <img src="${location.after.image}" alt="${location.after.title}">
                            </div>
                            <p>${location.after.description}</p>
                        </div>
                    </div>
                    <div class="location-info">
                        <p><strong>æ”¹é€ äº®ç‚¹:</strong> ä¿ç•™äº†åŸæœ‰å·¥ä¸šç»“æ„ï¼Œç»“åˆç°ä»£è®¾è®¡ç†å¿µï¼Œå®ç°äº†åŠŸèƒ½è½¬å‹ä¸ä»·å€¼æå‡ã€‚</p>
                    </div>
                `;
                
                comparisonModal.style.display = 'block';
                
                // æ ‡è®°ä¸ºå·²å‘ç°
                if (!location.discovered) {
                    location.discovered = true;
                    gameState.discovered++;
                    updateLocationList();
                }
            }
            
            // æ¸¸æˆå¾ªç¯
            function gameLoop() {
                update();
                draw();
                requestAnimationFrame(gameLoop);
            }
            
            // äº‹ä»¶ç›‘å¬
            window.addEventListener('keydown', function(e) {
                gameState.keys[e.key] = true;
                
                // ç©ºæ ¼é”®æ˜¾ç¤ºåœ°ç‚¹å¯¹æ¯”
                if (e.key === ' ' || e.key === 'Spacebar') {
                    e.preventDefault();
                    const nearLocation = checkNearLocation();
                    if (nearLocation) {
                        showLocationComparison(nearLocation);
                    }
                }
                
                // ESCé”®å…³é—­æ¨¡æ€æ¡†
                if (e.key === 'Escape') {
                    comparisonModal.style.display = 'none';
                }
            });
            
            window.addEventListener('keyup', function(e) {
                gameState.keys[e.key] = false;
            });
            
            closeModal.addEventListener('click', function() {
                comparisonModal.style.display = 'none';
            });
            
            nextLevelBtn.addEventListener('click', function() {
                levelCompleteModal.style.display = 'none';
                explorationGameContainer.style.display = 'none';
                memoryGameContainer.style.display = 'block';
            });
            
            // åˆå§‹åŒ–æ¸¸æˆ
            generateTiles();
            initLocations();
            gameLoop();
        });

        // ===============================
        // ç¬¬äºŒå…³ï¼šè®°å¿†é…å¯¹æ¸¸æˆ
        // ===============================
        document.addEventListener('DOMContentLoaded', function() {
            // æ¸¸æˆçŠ¶æ€å˜é‡
            let gameStarted = false;
            let flippedCards = [];
            let matchedPairs = 0;
            let attempts = 0;
            let timer = null;
            let seconds = 0;

            // DOMå…ƒç´ 
            const gameBoard = document.getElementById('game-board');
            const startBtn = document.getElementById('start-btn');
            const resetBtn = document.getElementById('reset-btn');
            const hintBtn = document.getElementById('hint-btn');
            const attemptsDisplay = document.getElementById('attempts');
            const matchesDisplay = document.getElementById('matches');
            const timerDisplay = document.getElementById('timer');
            const winModal = document.getElementById('win-modal');
            const finalAttempts = document.getElementById('final-attempts');
            const finalTime = document.getElementById('final-time');
            const playAgainBtn = document.getElementById('play-again');

            // åˆå§‹åŒ–æ¸¸æˆ
            function initGame() {
                // æ¸…ç©ºæ¸¸æˆæ¿
                gameBoard.innerHTML = '';
                flippedCards = [];
                matchedPairs = 0;
                attempts = 0;
                seconds = 0;
                
                // æ›´æ–°æ˜¾ç¤º
                attemptsDisplay.textContent = attempts;
                matchesDisplay.textContent = `${matchedPairs}/6`;
                timerDisplay.textContent = '00:00';
                
                // åœæ­¢è®¡æ—¶å™¨
                if (timer) {
                    clearInterval(timer);
                    timer = null;
                }
                
                // åˆ›å»ºå¡ç‰‡å¯¹ - ä½¿ç”¨ç¬¬ä¸€å…³çš„å·¥ä¸šé—äº§æ•°æ®
                const cardPairs = [];
                locationsData.forEach(location => {
                    // åˆ›å»ºæ”¹é€ å‰å¡ç‰‡
                    cardPairs.push({
                        id: `${location.id}-before`,
                        pairId: location.id,
                        name: location.name,
                        type: 'æ”¹é€ å‰',
                        image: location.before.image,
                        description: location.before.description
                    });
                    
                    // åˆ›å»ºæ”¹é€ åå¡ç‰‡
                    cardPairs.push({
                        id: `${location.id}-after`,
                        pairId: location.id,
                        name: location.name,
                        type: 'æ”¹é€ å',
                        image: location.after.image,
                        description: location.after.description
                    });
                });
                
                // æ´—ç‰Œç®—æ³•
                shuffleArray(cardPairs);
                
                // åˆ›å»ºå¡ç‰‡å…ƒç´ 
                cardPairs.forEach((item, index) => {
                    const card = document.createElement('div');
                    card.className = 'card';
                    card.dataset.id = item.id;
                    card.dataset.pairId = item.pairId;
                    
                    card.innerHTML = `
                        <div class="card-inner">
                            <div class="card-front"></div>
                            <div class="card-back">
                                <img src="${item.image}" alt="${item.name}">
                                <div class="card-title">${item.name}</div>
                                <div class="card-desc">${item.type}</div>
                            </div>
                        </div>
                    `;
                    
                    card.addEventListener('click', () => flipCard(card));
                    gameBoard.appendChild(card);
                });
                
                gameStarted = true;
            }

            // æ´—ç‰Œå‡½æ•°
            function shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
                return array;
            }

            // ç¿»è½¬å¡ç‰‡
            function flipCard(card) {
                // å¦‚æœæ¸¸æˆæœªå¼€å§‹æˆ–å¡ç‰‡å·²åŒ¹é…æˆ–å·²ç¿»è½¬ï¼Œåˆ™è¿”å›
                if (!gameStarted || card.classList.contains('matched') || card.classList.contains('flipped') || flippedCards.length >= 2) {
                    return;
                }
                
                // ç¿»è½¬å¡ç‰‡
                card.classList.add('flipped');
                flippedCards.push(card);
                
                // å¦‚æœç¿»è½¬äº†ä¸¤å¼ å¡ç‰‡ï¼Œæ£€æŸ¥æ˜¯å¦åŒ¹é…
                if (flippedCards.length === 2) {
                    attempts++;
                    attemptsDisplay.textContent = attempts;
                    
                    const card1 = flippedCards[0];
                    const card2 = flippedCards[1];
                    
                    // æ£€æŸ¥æ˜¯å¦åŒ¹é…ï¼ˆåŒä¸€å·¥ä¸šé—äº§çš„æ”¹é€ å‰å’Œæ”¹é€ åï¼‰
                    if (card1.dataset.pairId === card2.dataset.pairId) {
                        // åŒ¹é…æˆåŠŸ
                        card1.classList.add('matched');
                        card2.classList.add('matched');
                        matchedPairs++;
                        matchesDisplay.textContent = `${matchedPairs}/6`;
                        flippedCards = [];
                        
                        // æ£€æŸ¥æ¸¸æˆæ˜¯å¦ç»“æŸ
                        if (matchedPairs === 6) {
                            endGame();
                        }
                    } else {
                        // ä¸åŒ¹é…ï¼Œç¿»è½¬å›å»
                        setTimeout(() => {
                            card1.classList.remove('flipped');
                            card2.classList.remove('flipped');
                            flippedCards = [];
                        }, 1000);
                    }
                }
            }

            // å¼€å§‹è®¡æ—¶å™¨
            function startTimer() {
                timer = setInterval(() => {
                    seconds++;
                    const minutes = Math.floor(seconds / 60);
                    const remainingSeconds = seconds % 60;
                    timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
                }, 1000);
            }

            // ç»“æŸæ¸¸æˆ
            function endGame() {
                clearInterval(timer);
                finalAttempts.textContent = attempts;
                finalTime.textContent = timerDisplay.textContent;
                setTimeout(() => {
                    winModal.style.display = 'flex';
                }, 1000);
            }

            // æç¤ºåŠŸèƒ½
            function showHint() {
                if (!gameStarted || flippedCards.length > 0) return;
                
                // æ‰¾åˆ°æ‰€æœ‰æœªåŒ¹é…çš„å¡ç‰‡
                const unmatchedCards = Array.from(document.querySelectorAll('.card:not(.matched)'));
                
                if (unmatchedCards.length < 2) return;
                
                // éšæœºé€‰æ‹©ä¸€å¯¹æœªåŒ¹é…çš„å¡ç‰‡
                const pairIds = {};
                let pairFound = false;
                let card1, card2;
                
                unmatchedCards.forEach(card => {
                    const pairId = card.dataset.pairId;
                    if (pairIds[pairId] && !pairFound) {
                        card1 = pairIds[pairId];
                        card2 = card;
                        pairFound = true;
                    } else {
                        pairIds[pairId] = card;
                    }
                });
                
                if (pairFound) {
                    // çŸ­æš‚æ˜¾ç¤ºè¿™å¯¹å¡ç‰‡
                    card1.classList.add('flipped');
                    card2.classList.add('flipped');
                    
                    setTimeout(() => {
                        card1.classList.remove('flipped');
                        card2.classList.remove('flipped');
                    }, 1000);
                }
            }

            // äº‹ä»¶ç›‘å¬å™¨
            startBtn.addEventListener('click', () => {
                initGame();
                startTimer();
            });

            resetBtn.addEventListener('click', () => {
                initGame();
                if (gameStarted) {
                    startTimer();
                }
            });

            hintBtn.addEventListener('click', showHint);

            playAgainBtn.addEventListener('click', () => {
                winModal.style.display = 'none';
                initGame();
                startTimer();
            });

            // åˆå§‹åŒ–æ¸¸æˆï¼ˆä½†ä¸å¼€å§‹è®¡æ—¶å™¨ï¼‰
            initGame();
        });
    </script>
</body>
</html>